# mkdocs.yml
# TKE Workshop 站点配置

# ==================== 基础信息 ====================
site_name: TKE Workshop
site_url: https://tke-workshop.github.io
site_author: Tencent Cloud TKE Team
site_description: 腾讯云容器服务 TKE 最佳实践 Workshop

# ==================== 仓库信息 ====================
repo_url: https://github.com/tke-workshop/tke-workshop.github.io
repo_name: TKE Workshop
edit_uri: edit/main/docs/

# ==================== 主题配置 ====================
theme:
  name: material
  language: zh
  custom_dir: overrides  # 自定义覆盖目录
  
  # 调色板（支持明暗切换）- 时尚现代风格
  palette:
    - scheme: default
      primary: indigo
      accent: cyan
      toggle:
        icon: material/brightness-7
        name: 切换到深色模式
    - scheme: slate
      primary: indigo
      accent: cyan
      toggle:
        icon: material/brightness-4
        name: 切换到浅色模式
  
  # 功能特性
  features:
    # 导航
    - navigation.tabs           # 顶部标签页导航
    - navigation.tabs.sticky    # 标签页固定
    - navigation.sections       # 侧边栏分组（仅当前模块）
    - navigation.top            # 返回顶部按钮
    - navigation.indexes        # 章节索引页
    - navigation.footer         # 页脚导航
    
    # 搜索
    - search.highlight          # 搜索高亮
    - search.share              # 搜索分享
    - search.suggest            # 搜索建议
    
    # 内容
    - content.action.edit       # 编辑按钮
    - content.action.view       # 查看源码按钮
    - content.code.copy         # 代码复制按钮
    - content.code.annotate     # 代码注释
    - content.tabs.link         # 标签页链接
    
    # 目录
    - toc.follow                # 目录跟随
  
  # 图标
  icon:
    repo: fontawesome/brands/github
    edit: material/pencil
    view: material/eye

# ==================== 导航结构 ====================
nav:
  - TKE Workshop: index.md
  
  - 基础操作:
    - basics/index.md
    - 集群管理:
      - 创建集群: basics/cluster/01-create-cluster.md
      - 删除集群: basics/cluster/02-delete-cluster.md
      - 查询集群: basics/cluster/04-describe-clusters.md
    - 节点管理:
      - 添加节点: basics/node/01-add-node.md
      - 删除节点: basics/node/02-delete-node.md
      - 查询节点: basics/node/04-describe-nodes.md
    - 节点池管理:
      - 创建节点池: basics/node-pool/01-create-node-pool.md
      - 扩缩节点池: basics/node-pool/02-scale-node-pool.md
    - 超级节点管理:
      - 创建超级节点池: basics/supernode/01-create-supernode-pool.md
      - 创建按量超级节点: basics/supernode/02-create-supernode.md
      - 删除超级节点: basics/supernode/03-delete-supernode.md
    - 工作负载:
      - 创建 Deployment: basics/workload/01-create-deployment.md
      - 更新 Deployment: basics/workload/02-update-deployment.md
      - 删除 Deployment: basics/workload/03-delete-deployment.md
    - 服务管理:
      - 创建 Service: basics/service/01-create-service.md
  
  - 最佳实践:
    - best-practices/index.md
    - 安全:
      - best-practices/security/index.md
      - 身份认证和访问管理: best-practices/security/identity-auth-and-access-management.md
      - 运行时安全: best-practices/security/pod-security.md
      - 网络安全: best-practices/security/network-security.md
      - 制品和镜像安全: best-practices/security/image-security.md
      - 数据安全: best-practices/security/data-security.md
      - 合规与审计: best-practices/security/compliance-and-audit.md
    - 可用性:
      - best-practices/availability/index.md
      - 控制面高可用 - etcd过载保护: best-practices/availability/etcd-overload-protection.md
      - 控制面高可用 - apiserver限速和熔断: best-practices/availability/apiserver-rate-limiting.md
      - 生产实践 - 配置TKE防误删策略: best-practices/availability/deletion-protection.md
      - 生产实践 - 使用企业级云原生etcd: best-practices/availability/cloud-native-etcd.md
      - 数据面高可用 - 备份与恢复: best-practices/availability/backup-and-recovery.md
    - 可扩展性:
      - TKE 可扩展性指南概述: best-practices/scalability/index.md
      - 控制平面扩展: best-practices/scalability/control-plane-scaling.md
      - 数据平面扩展: best-practices/scalability/data-plane-scaling.md
      - 系统组件扩展: best-practices/scalability/system-component-scaling.md
      - 工作负载扩展: best-practices/scalability/workload-scaling.md
    - 集群升级:
      - best-practices/upgrade/index.md
      - 升级集群控制面: best-practices/upgrade/control-plane-upgrade.md
      - 升级集群数据面: best-practices/upgrade/data-plane-upgrade.md
      - 升级集群内组件: best-practices/upgrade/component-upgrade.md
      - 跨多Kubernetes版本 迁移业务升级集群: best-practices/upgrade/cross-version-migration.md
    - 成本优化:
      - best-practices/cost-optimization/index.md
      - 分析成本: best-practices/cost-optimization/cost-analysis.md
      - 优化成本 - 选择最优的调度策略: best-practices/cost-optimization/scheduling-optimization.md
      - 优化成本 - 规整算力资源碎片: best-practices/cost-optimization/resource-defragmentation.md
      - 优化成本 - 资源动态伸缩: best-practices/cost-optimization/dynamic-scaling.md
  
  - AI on TKE:
    - ai-ml/index.md
    - GPU 调度: ai-ml/gpu-scheduling.md
    - GPU Pod 最佳实践: ai-ml/04-gpu-pod-best-practices.md
    - 模型推理: ai-ml/model-inference.md
    - 训练任务: ai-ml/training.md
  
  - Data on TKE:
    - data/index.md
    - 存储配置: data/storage.md
    - 数据处理: data/data-processing.md
  
  - Cookbook:
    - https://github.com/tke-workshop/tke-workshop.github.io/tree/main/cookbook

# ==================== 插件配置 ====================
plugins:
  - search:
      lang: zh
      separator: '[\s\-\.]+'
  
  - git-revision-date-localized:
      type: date
      fallback_to_build_date: true
      enable_creation_date: true
  
  - git-committers:
      repository: tke-workshop/tke-workshop.github.io
      branch: main
      enabled: !ENV [CI, false]
  
  - minify:
      minify_html: true

# ==================== Markdown 扩展 ====================
markdown_extensions:
  # 基础扩展
  - abbr                        # 缩写
  - admonition                  # 告警框
  - attr_list                   # 属性列表
  - def_list                    # 定义列表
  - footnotes                   # 脚注
  - md_in_html                  # HTML 中的 Markdown
  - tables                      # 表格
  - toc:
      permalink: true
      toc_depth: 3
  
  # PyMdown 扩展
  - pymdownx.arithmatex:        # 数学公式
      generic: true
  - pymdownx.betterem:          # 更好的强调
      smart_enable: all
  - pymdownx.caret              # 上标
  - pymdownx.details            # 可折叠详情
  - pymdownx.emoji:             # Emoji
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.highlight:         # 代码高亮
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
  - pymdownx.inlinehilite       # 行内代码高亮
  - pymdownx.keys               # 键盘按键
  - pymdownx.mark               # 标记
  - pymdownx.smartsymbols       # 智能符号
  - pymdownx.snippets           # 代码片段
  - pymdownx.superfences:       # 超级围栏
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
  - pymdownx.tabbed:            # 标签页
      alternate_style: true
  - pymdownx.tasklist:          # 任务列表
      custom_checkbox: true
  - pymdownx.tilde              # 删除线

# ==================== 额外配置 ====================
extra:
  # 社交链接
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/tke-workshop/tke-workshop.github.io
      name: GitHub
  
  # 版本信息
  version:
    provider: mike

# ==================== 额外 CSS/JS ====================
extra_css:
  - stylesheets/extra.css

extra_javascript:
  - javascripts/extra.js

# ==================== 版权信息 ====================
copyright: Copyright &copy; 2024-2026 Tencent Cloud
